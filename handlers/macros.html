<!-- $Id$ -->
<!-- $Source$ -->

<html>
<head>
<title>ProFTPD Developer's Guide: Handler Macros</title>
</head>

<body bgcolor=white>

<hr><br>
<center>
<img src="../images/proftpd.png">
<br><br>
<h3><b>ProFTPD Developer's Guide: Handler Macros</b></h3>
<i><b>ProFTPD Version 1.2.0</b></i><br>
</center>
<hr><br>

<p>
<center><a href="../toc.html">Table of Contents</a></center><br>

<p>
<b>Configuration Macros</b><br>
<ul type=disc>

  <li><a name="ConfMacroCheckArgs"></a><dd>
    <dt><code>CHECK_ARGS(cmd_rec *cmd, int argc)</code>
    <dl><br>checks the number of arguments passed to the directive against
        what we want.  Note that this is <i>one less than</i>
        <code>cmd_rec->argc</code>, because <code>cmd_rec->argc</code> includes
        <code>cmd_rec->argv[0]</code> (the directive itself).  This check
        also ensures only that there is an equal <i>or greater</i> number of
        arguments than the number requested.  If this check fails, a generic
        error is sent to the user.<br>
        <br>
        <b>Example</b>:  <code>CHECK_ARGS(cmd, 1);</code>
      </dl></dd></li>
    <br>

  <li><a name="ConfMacroCheckHasArgs"></a><dd>
    <dt><code>CHECK_HASARGS(cmd_rec *cmd, int argc)</code>
    <dl><br>performs a boolean check, to see if the number of arguments passed
        to the directive are of the given number.<br>
        <br>
        <b>Example</b>:  <code>if (!CHECK_HASARGS(cmd, 3)) {</code>
      </dl></dd></li>
    <br>

  <li><a name="ConfMacroCheckVarArgs"></a><dd>
    <dt><code>CHECK_VARARGS(cmd_rec *cmd, int argc_min, int argc_max)</code>
    <dl><br>If this check fails, a generic error is sent to the user.<br>
        <br>
        <b>Example</b>:  <code>CHECK_VARARGS(cmd, 1, 5);</code>
      </dl></dd></li>
    <br>

  <li><a name="ConfMacroCheckConf"></a><dd>
    <dt><code>CHECK_CONF(cmd_rec *cmd, int flags)</code>
    <dl><br>makes sure that this directive is not being "used" in the wrong
        context (i.e. if the directive is only available or applicable inside
        certain <a href="../src/include/dirtree.h.html#CONF_ROOT">contexts</a>).
        In this case, we are allowing the directive inside of
        <code>&lt;Anonymous&gt;</code> and <code>&lt;Limit&gt;</code>,
        but nowhere else. If this macro fails a generic error is
        logged and the handler aborts.<br>
        <br>
        <b>Example</b>:
          <code>CHECK_CONF(cmd, CONF_ANON|CONF_LIMIT);</code>
      </dl></dd></li>
    <br>

  <li><a name="ConfMacroConfError"></a><dd>
    <dt><code>CONF_ERROR(cmd_rec *cmd, char *message)</code>
    <dl><br>
      <br>
        <b>Example</b>:
          <code>CONF_ERROR(cmd, "syntax: expected numbers, not letters");</code>
      </dl></dd></li>
    <br>
</ul>

<p>
<b>Command Macros</b><br>
<ul type=disc>
  <li><a name="CommandMacroCheckCommandArgs"></a><dd>
    <dt><code>CHECK_CMD_ARGS(cmd_rec *cmd, int argc)</code>
    <dl><br>checks that the number of arguments passed to the directive is
        <i>exactly</i> the indicated count.  If this check fails, an
        <code>R_501</code> error code, with a message stating the problem, is
        issued to the client.<br>
        <br>
        <b>Example</b>: <code>CHECK_CMD_ARGS(cmd, 2);</code>
    </dl></dd></li>
    <br>

  <li><a name="CommandMacroCheckCommandMinArgs"></a><dd>
    <dt><code>CHECK_CMD_MIN_ARGS(cmd_rec *cmd, int argc)</code>
    <dl><br>checks that the command has received <i>at least</i> the
        indicated number of arguments.  If this check fails, an
        <code>R_501</code> error code is issued to the client.<br>
        <br>
        <b>Example</b>: <code>CHECK_CMD_MIN_ARGS(cmd, 2);</code>
    </dl></dd></li>
    <br>
</ul>

<p>
<b>Authentication Macros</b><br>
<ul type=disc>
</ul>

<p>
<center><a href="../toc.html">Table of Contents</a></center><br>

<hr><br>

Author: <i>$Author$</i><br>
Last Updated: <i>$Date$</i><br>

<br><hr>

<font size=2><b><i>
&copy; Copyright 2000 TJ Saunders<br>
 All Rights Reserved<br>
</i></b></font>

<hr><br>

</body>
</html>
