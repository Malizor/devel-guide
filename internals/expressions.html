<!-- $Id$ -->
<!-- $Source$ -->

<html>
<head>
<title>ProFTPD Developer's Guide: Configuration Expressions</title>
</head>

<body bgcolor=white>

<hr><br>
<center>
<img src="../images/proftpd.png" border=0>
<br><br>
<h3><b>ProFTPD Developer's Guide: Configuration Expressions</b></h3>
<i><b>ProFTPD Version 1.2</b></i><br>
</center>
<hr><br>

<p>
<center><a href="../toc.html">Table of Contents</a></center><br>

<p>
<b>Configuration Expressions</b><br>
There are many configuration directives that can take as parameter a list
of names, be they user, group, or class names.  These lists are then
evaluated as Boolean AND or OR expressions.  Note that such name lists are
very different from regular expressions, which are used for pattern
matching.

<p>
An AND expression is simply one in which all of the elements in the list
must evaluate to TRUE for the entire expression to be TRUE.  Such an expression
is usually useful when used on group names, for a user may be a member of
multiple groups.  For example, given a group expression like:
<pre>
  group1,group2
</pre>
if evaluated as an AND expression, it will evaluate to TRUE if the current
user is both a member of <code>group1</code> <b>and</b> <code>group2</code>.
Another example is:
<pre>
  group1,!group2
</pre>
which, when evaluated as an AND expression, will be TRUE if the current user
is a member of <code>group1</code> <b>and not</b> a member of
<code>group2</code>.

<p>
OR expressions are simpler, for only one element in the list needs to
evaluate to TRUE for the entire expression to be TRUE.  These expressions
are usually useful for user and class names.  For example:
<pre>
  user1,user2
</pre>
when evaluated as an OR expression, will be TRUE if the current user is
either <code>user1</code> <b>or</b> <code>user2</code>.  However, using
the <code>!</code> negation notation in an OR expression can easily
catch the administrator offguard:
<pre>
  user2,!user3
</pre>
As an OR expression, this would evaluate to TRUE for <code>user1</code>, for
<code>user1</code> != <code>user3</code> is TRUE.  All of this is valid for
class names.

<p>
There <i>are</i> times when the developer may want to use user or class names
in AND expressions, <i>e.g.</i>:
<pre>
  !user2,!user3
</pre>
would evaluate to TRUE, as an AND expression, for any user other than
<code>user2</code> and <code>user3</code>.

<p>
The ProFTPD API functions for performing the evaluation of a given expression are:
<pre>
  <a href="../src/src/dirtree.c.html#pr_class_and_expression"><code>pr_class_and_expression()</code></a>
  <a href="../src/src/dirtree.c.html#pr_class_or_expression"><code>pr_class_or_expression()</code></a>
  <a href="../src/src/dirtree.c.html#pr_group_and_expression"><code>pr_group_and_expression()</code></a>
  <a href="../src/src/dirtree.c.html#pr_group_or_expression"><code>pr_group_or_expression()</code></a>
  <a href="../src/src/dirtree.c.html#pr_user_and_expression"><code>pr_user_and_expression()</code></a>
  <a href="../src/src/dirtree.c.html#pr_user_or_expression"><code>pr_user_or_expression()</code></a>
</pre>
Note that for class expressions to be functional, the tagging of a client
session with a class must be enabled via the <code>ClassEngine</code>
configuration directive.  Also, the above expressions all use the pertinent
<code>session_t</code> members for comparisons (<i>i.e.</i>
<code>session.class</code>, <code>session.groups</code>,
<code>session.user</code>), and these members only became valid for use
after the client has connected and authenticated.

<p>
<center><a href="../toc.html">Table of Contents</a></center><br>

<hr><br>

Author: <i>$Author$</i><br>
Last Updated: <i>$Date$</i><br>

<br><hr>

<font size=2><b><i>
&copy; Copyright 2000-2003 TJ Saunders<br>
 All Rights Reserved<br>
</i></b></font>

<hr><br>

</body>
</html>
