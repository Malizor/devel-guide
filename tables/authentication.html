<!-- $Id$ -->
<!-- $Source$ -->

<html>
<head>
<title>ProFTPD Developer's Guide: Authentication Tables</title>
</head>

<body bgcolor=white>

<hr><br>
<center>
<img src="../images/proftpd.png" border=0>
<br><br>
<h3><b>ProFTPD Developer's Guide: Authentication Tables</b></h3>
<i><b>ProFTPD Version 1.2</b></i><br>
</center>
<hr><br>

<p>
<center><a href="../toc.html">Table of Contents</a></center><br>

<p>
<b>Authentication Tables</b><br>
The <a href="../src/include/modules.h.html#authtable"><code>authtable</code></a>
declares

<p>
<b>Definition</b><br>
<ul>
  <li>authentication type identifier -- only <code>0</code> defined at present
  <li>authentication function name
  <li>authentication handler function pointer, which <b>must</b> have the
      prototype:
<pre>
    MODRET func(cmd_rec *)
</pre>
</ul>

<p>
Each hander accepts data in from the <code>cmd_rec</code> structure, and should
return its results via the <code>MODRET->data</code> member.  The core
function <code>mod_create_data()</code> can create this data structure
properly for returning to the caller.

<p>
<b>Example</b><br>
This example authentication table is taken directly from
<a href="../src/modules/mod_unixpw.c.html">mod_unixpw.c</a>:
<pre>
static authtable unixpw_auth[] = {
  { 0, "setpwent", pw_setpwent },
  { 0, "endpwent", pw_endpwent },
  { 0, "setgrent", pw_setgrent },
  { 0, "endgrent", pw_endgrent },
  { 0, "getpwent", pw_getpwent },
  { 0, "getgrent", pw_getgrent },
  { 0, "getpwnam", pw_getpwnam },
  { 0, "getpwuid", pw_getpwuid },
  { 0, "getgrnam", pw_getgrnam },
  { 0, "getgrgid", pw_getgrgid },
  { 0, "auth",     pw_auth },
  { 0, "check",    pw_check },
  { 0, "uid_name", pw_uid_name },
  { 0, "gid_name", pw_gid_name },
  { 0, "name_uid", pw_name_uid },
  { 0, "name_gid", pw_name_gid },
  { 0, NULL }
};
</pre>

<p>
The trailing <code>{ 0, NULL }</code> marks the end of the authentication table,
and should always be used.

<p>
<center><a href="../toc.html">Table of Contents</a></center><br>

<hr><br>

Author: <i>$Author$</i><br>
Last Updated: <i>$Date$</i><br>

<br><hr>

<font size=2><b><i>
&copy; Copyright 2000-2003 TJ Saunders<br>
 All Rights Reserved<br>
</i></b></font>

<hr><br>

</body>
</html>
